# 一、ES分词器

## 1.1介绍

​	[文本分析](https://so.csdn.net/so/search?q=文本分析&spm=1001.2101.3001.7020)就是**把全文本转换成一系列单词（term/token）的过程**，也叫**分词**。在 ES 中，Analysis 是通过**分词器（Analyzer）** 来实现的

## 1.2 分词器的构成

**character filter**

> 接受原字符流，通过添加、删除或替换操作改变原字符流

例如：去除文本中的html标签，或者将罗马数字转换成阿拉伯数字等。一个字符过滤器可以有==零个或者多个==

**tokenizer**

> 简单的说就是将一整段文本拆分成一个个的词。

例如拆分英文，通过空格能将句子拆分成一个个的词，但是对于中文来说，无法使用这种方式来实现。在一个分词器中,==有且只有一个==tokenizeer

**token filters**

> 将切分的单词添加、删除或者改变

例如将所有英文单词小写，或者将英文中的停词a删除等，在token filters中，不允许将token(分出的词)的position或者offset改变。同时，在一个分词器中，可以有==零个或者多个==token filters.

![执行顺序](https://i-blog.csdnimg.cn/blog_migrate/a9cd431923c9fc3a27a8c776c25a9005.png)

## 1.3参考链接

[Elasticsearch(10) --- 内置分词器、中文分词器 - 雨点的名字 - 博客园 (cnblogs.com)](https://www.cnblogs.com/qdhxhz/p/11585639.html)

[【9种】ElasticSearch分词器详解，一文get！！！| 博学谷狂野架构师_es分词器-CSDN博客](https://blog.csdn.net/bxg_kyjgs/article/details/130561856)

[Elasticsearch 分词器 - 废物大师兄 - 博客园 (cnblogs.com)](https://www.cnblogs.com/cjsblog/p/10171695.html)



常见中文分词器：==IK分词器==，==smartCN==，==hanLP==

IK分词器：https://github.com/medcl/elasticsearch-analysis-ik

es分词器用于将输入文本分割成单独的词或短语，这些词或短语将用于后续的分析和分类。

NLP技术可以帮助从文本中提取出有用的特征，例如词频、TF-IDF、词嵌入（Word Embeddings）等，这些特征是进行文本分类的基础。



# 二、nlp文本分类

### 一、文本预处理

尽管ES已经完成了基本的分词，但NLP在分类前可能还需要进行进一步的预处理工作，以确保文本数据的质量。这些预处理步骤可能包括：

1. **停用词过滤**：去除对文本分类意义不大的词，如“的”、“了”等。
2. **词干提取**：将词语还原到其基本形式，以减少词汇的形态变化对分类的影响。
3. **词性标注**：标注出每个词的词性，这有助于理解文本的结构和含义。
4. **命名实体识别**：识别出文本中的命名实体（如人名、地名、机构名等），这些实体对文本分类可能有重要作用。

### 二、特征提取

特征提取是将文本数据转换为分类模型可以理解和处理的格式的过程。在NLP中，特征提取通常包括：

1. **词袋模型（Bag of Words, BOW）**：将文本表示为一个词汇表大小的向量，每个元素对应词汇表中一个词的出现频率。但这种方法忽略了词序和上下文信息。
2. **TF-IDF（词频-逆文档频率）**：在词袋模型的基础上，通过考虑词的重要性和文档频率来调整词权重，以提高分类效果。
3. **词嵌入（Word Embedding）**：将词表示为高维空间中的稠密向量，这些向量能够捕捉到词之间的语义关系。常见的词嵌入模型包括Word2Vec、GloVe等。

### 三、模型训练

使用提取的特征来训练分类模型。在NLP中，文本分类常用的模型包括：

1. **传统机器学习模型**：如朴素贝叶斯、支持向量机（SVM）、逻辑回归等。这些模型通常基于手工设计的特征。
2. **深度学习模型**：如卷积神经网络（CNN）、循环神经网络（RNN）、长短时记忆网络（LSTM）、Transformer等。这些模型能够自动从文本数据中提取高层次的特征，并在大量数据集上表现出色。

### 四、分类决策

训练好的模型可以对新的文本数据进行分类决策。模型会根据输入的文本特征，输出该文本属于各个类别的概率或标签。

### 五、评估与优化

分类模型的效果需要通过评估指标来量化，如准确率、精确率、召回率、F1分数等。根据评估结果，可以对模型进行调优，如调整模型参数、更换特征提取方法、使用更复杂的模型等。



![0c6787e6c3f1f58c6b80c6f1b749a5d](E:\software data\wechat data\WeChat Files\wxid_mzm6kwfz4i8122\FileStorage\Temp\0c6787e6c3f1f58c6b80c6f1b749a5d.png)